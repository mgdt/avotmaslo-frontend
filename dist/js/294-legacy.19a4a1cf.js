"use strict";(self["webpackChunkavtomaslo"]=self["webpackChunkavtomaslo"]||[]).push([[294],{31968:function(e,t,n){n.d(t,{g:function(){return s}});var r=n(50124),a=n(48534),i=(n(69826),n(41539),n(92222),n(57327),n(38862),n(57658),n(44870)),c=n(50086),u=n(46943),o=n(13854),s=(0,o.Q_)("serts",(function(){var e=(0,i.iH)([]);function t(){return n.apply(this,arguments)}function n(){return n=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.Z.get("".concat(c.Z.API_URL,"/serts"));case 2:n=t.sent,e.value=n.data;case 4:case"end":return t.stop()}}),t)}))),n.apply(this,arguments)}function o(){return s.apply(this,arguments)}function s(){return s=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(c.Z.API_URL,"/serts"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return p=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("".concat(c.Z.API_URL,"/serts/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(t,n){var r=e.value.find((function(e){return e._id==t}));r.imageUrl=n,r.updated=!0}function d(e){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function t(n){var a,i,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",i={Authorization:"Bearer ".concat(a)},t.next=5,u.Z["delete"]("".concat(c.Z.API_URL,"/serts/").concat(n),{headers:i});case 5:t.sent,o=e.value.filter((function(e){return e._id!=n})),e.value=o,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),h.apply(this,arguments)}function g(e){return m.apply(this,arguments)}function m(){return m=(0,a.Z)((0,r.Z)().mark((function t(n){var a,i,o;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",i={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.next=5,u.Z.post("".concat(c.Z.API_URL,"/serts"),JSON.stringify(n),{headers:i});case 5:o=t.sent,e.value.push(o.data),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),m.apply(this,arguments)}function v(e,t){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",i={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},e.next=5,u.Z.put("".concat(c.Z.API_URL,"/serts/").concat(t),JSON.stringify(n),{headers:i});case 5:e.sent,n.updated=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),alert("Ошибка");case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),w.apply(this,arguments)}return{serts:e,fetchSerts:t,deleteSert:d,createSert:g,fetchSert:l,updateSert:v,updateSertImage:f,getSerts:o}}))},4903:function(e,t,n){n.d(t,{Z:function(){return Z}});n(92222);var r=n(73396),a=n(87139),i=function(e){return(0,r.dD)("data-v-f8d050ea"),e=e(),(0,r.Cn)(),e},c={class:"input-group"},u=["src"],o=i((function(){return(0,r._)("div",{class:"image-overlay"},[(0,r._)("span",null,"Нажмите, чтобы загрузить или обновить изображение")],-1)})),s={key:1,class:"image-wrap-text"};function l(e,t,n,i,l,p){return(0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("label",{class:"image-wrap",style:(0,a.j5)("width: ".concat(n.wrapSize,"px; height: ").concat(n.wrapSize,"px"))},[i.imageUrl?((0,r.wg)(),(0,r.iD)("img",{key:0,src:i.config.API_URL+i.imageUrl,style:(0,a.j5)("max-width: ".concat(n.imageMaxWidth,"px; max-height: ").concat(n.imageMaxWidth,"px;")),class:"image-wrap-img",alt:""},null,12,u)):(0,r.kq)("",!0),o,i.imageUrl?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",s,"Нажмите, чтобы загрузить или обновить изображение")),(0,r._)("input",{type:"file",ref:"fileInput",onChange:t[0]||(t[0]=function(){return i.handleFileInputChange&&i.handleFileInputChange.apply(i,arguments)})},null,544)],4)])}var p=n(50124),f=n(48534),d=n(44870),h=n(46943),g=n(50086),m={props:["imageUrlProp","extraInfo","imageMaxWidth","wrapSize"],emits:["updateImage"],setup:function(e,t){var n=(0,d.iH)(null),a=(0,d.iH)("");function i(){return c.apply(this,arguments)}function c(){return c=(0,f.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.value.files[0]&&u();case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(){return o.apply(this,arguments)}function o(){return o=(0,f.Z)((0,p.Z)().mark((function r(){var i,c,u,o;return(0,p.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=new FormData,i.append("file",n.value.files[0]),c=localStorage.getItem("token")?localStorage.getItem("token"):"",u={"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(c)},r.next=6,h.Z.post("".concat(g.Z.API_URL,"/upload"),i,{headers:u});case 6:o=r.sent,a.value="/uploads/"+o.data.filename,t.emit("updateImage","/uploads/"+o.data.filename,e.extraInfo);case 9:case"end":return r.stop()}}),r)}))),o.apply(this,arguments)}return(0,r.bv)((function(){a.value=e.imageUrlProp})),(0,r.ic)((function(){a.value=e.imageUrlProp})),{handleFileInputChange:i,fileInput:n,imageUrl:a,config:g.Z}}},v=n(40089);const w=(0,v.Z)(m,[["render",l],["__scopeId","data-v-f8d050ea"]]);var Z=w},42294:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(50124),a=n(48534),i=n(73396),c=n(44870),u=n(87139),o=n(4903),s=n(31968),l=function(e){return(0,i.dD)("data-v-c886c6d0"),e=e(),(0,i.Cn)(),e},p={class:"container"},f=l((function(){return(0,i._)("h3",null,"Сертификаты",-1)})),d={class:"serts"},h={class:"sert__item"},g=["onClick"],m=["onClick"],v={class:"sert__item"},w={__name:"AdminSerts",setup:function(e){var t=(0,s.g)(),n=(0,c.iH)({imageUrl:""});function l(e,r){"new"!=r.id?t.updateSertImage(r.id,e):n.value.imageUrl=e}function w(e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,a.Z)((0,r.Z)().mark((function e(n,a){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.updateSert(n,a);case 2:alert("Успешно");case 3:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function x(e){return k.apply(this,arguments)}function k(){return k=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Удалить категорию?")){e.next=3;break}return e.next=3,t.deleteSert(n);case 3:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function y(e){return I.apply(this,arguments)}function I(){return I=(0,a.Z)((0,r.Z)().mark((function e(a){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createSert(a);case 2:n.value.imageUrl="";case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}return(0,i.bv)((0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchSerts();case 2:case"end":return e.stop()}}),e)})))),function(e,r){return(0,i.wg)(),(0,i.iD)("div",p,[f,(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,c.SU)(t).serts,(function(e){return(0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(o.Z,{imageUrlProp:e.imageUrl,imageMaxWidth:300,wrapSize:300,extraInfo:{id:e._id},onUpdateImage:l},null,8,["imageUrlProp","extraInfo"]),e.updated?((0,i.wg)(),(0,i.iD)("button",{key:0,style:{"margin-right":"10px"},class:(0,u.C_)(["btn",{"btn-secondary":e.updated}]),onClick:function(t){return w(e._id,e)}}," Сохранить ",10,g)):(0,i.kq)("",!0),(0,i._)("button",{onClick:function(t){return x(e._id)},class:"btn btn-danger"}," Удалить ",8,m)])})),256)),(0,i._)("div",v,[(0,i.Wm)(o.Z,{imageUrlProp:n.value.imageUrl,imageMaxWidth:300,wrapSize:300,extraInfo:{id:"new"},onUpdateImage:l},null,8,["imageUrlProp"]),(0,i._)("button",{onClick:r[0]||(r[0]=function(e){return y(n.value)}),class:"btn btn-secondary"}," Добавить ")])])])}}},Z=n(40089);const x=(0,Z.Z)(w,[["__scopeId","data-v-c886c6d0"]]);var k=x}}]);
//# sourceMappingURL=294-legacy.19a4a1cf.js.map