"use strict";(self["webpackChunkavtomaslo"]=self["webpackChunkavtomaslo"]||[]).push([[380],{3649:function(t,r,e){e.r(r),e.d(r,{default:function(){return at}});var n=e(73396),c=e(87139),a=e(58737),u=function(t){return(0,n.dD)("data-v-6fb8ee69"),t=t(),(0,n.Cn)(),t},i={class:"page-cart"},o={class:"breadcrumbs"},s={class:"container"},l=u((function(){return(0,n._)("img",{src:a,alt:"",class:"breadcrumbs__arrow"},null,-1)})),_=u((function(){return(0,n._)("span",{class:"breadcrumbs__current"},"Корзина",-1)})),d={class:"cart"},m={class:"container"},p=u((function(){return(0,n._)("h1",{class:"cart__title section__title"},"Корзина",-1)})),f={class:"cart__items"},v={class:"cart__btm"},b={class:"cart__total"},g=u((function(){return(0,n._)("span",null,"Итого:",-1)})),w=u((function(){return(0,n._)("button",{class:"cart__submit btn-primary"},"Оформить заказ",-1)}));function k(t,r,e,a,u,k){var h=(0,n.up)("Header"),C=(0,n.up)("RouterLink"),x=(0,n.up)("CartItem"),Z=(0,n.up)("Callback"),y=(0,n.up)("Footer");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(h),(0,n._)("section",o,[(0,n._)("div",s,[(0,n.Wm)(C,{to:"/",class:"breadcrumbs__link"},{default:(0,n.w5)((function(){return[(0,n.Uk)("Главная")]})),_:1}),l,_])]),(0,n._)("section",d,[(0,n._)("div",m,[p,(0,n._)("div",f,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.cartArr,(function(t){return(0,n.wg)(),(0,n.j4)(x,{count:t.count,product:t.product,key:t.product._id},null,8,["count","product"])})),128))]),(0,n._)("div",v,[(0,n._)("div",b,[g,(0,n.Uk)(" "+(0,c.zw)(a.formatNumber(a.totalCost))+" ₽ ",1)]),(0,n._)("button",{class:"cart__fast",onClick:r[0]||(r[0]=function(){return t.handleNotify&&t.handleNotify.apply(t,arguments)})}," Быстрый заказ "),w])])]),(0,n.Wm)(Z),(0,n.Wm)(y)])}var h=e(50124),C=e(48534),x=(e(57658),e(47941),e(41539),e(78783),e(33948),e(41637),e(39714),e(54747),e(69826),e(70586)),Z=e(65841),y=e(50953),I=(e(68309),e(82526),e(41817),e.p+"img/minus.d7bc965c.svg"),N=e.p+"img/plus.26648abb.svg",z=e.p+"img/basket.80ff7973.svg",F=function(t){return(0,n.dD)("data-v-908a194a"),t=t(),(0,n.Cn)(),t},U={class:"cart__item"},D={class:"cart__item-left"},H={class:"cart__item-img"},L=["src"],W=F((function(){return(0,n._)("svg",{width:"91",height:"13",viewBox:"0 0 91 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("ellipse",{cx:"45.3473",cy:"6.7986",rx:"45.0417",ry:"6.20139",fill:"#090909"})],-1)})),j={class:"cart__item-info"},A={class:"cart__item-title"},B={class:"cart__item-total-mob mob"},G=["innerHTML"],M={class:"cart__item-price"},O={class:"cart__item-price-mob mob"},P={class:"cart__item-counter"},R=F((function(){return(0,n._)("img",{src:I,alt:""},null,-1)})),S=[R],T={class:"cart__item-count"},Y=F((function(){return(0,n._)("img",{src:N,alt:""},null,-1)})),E=[Y],J={class:"cart__item-total"};function K(t,r,e,a,u,i){return(0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",D,[(0,n._)("div",H,[(0,n._)("img",{src:a.getImageUrl(e.product),alt:""},null,8,L),W]),(0,n._)("div",j,[(0,n._)("h3",A,(0,c.zw)(e.product.name),1),(0,n._)("div",B,(0,c.zw)(a.formatNumber(a.totalCost))+" ₽ ",1),(0,n._)("p",{class:"cart__item-text",innerHTML:e.product.description},null,8,G),(0,n._)("div",M," Цена за 1 шт. — "+(0,c.zw)(a.formatNumber(e.product.price))+" ₽ ",1)])]),(0,n._)("div",O," Цена за 1 шт. — "+(0,c.zw)(a.formatNumber(e.product.price))+" ₽ ",1),(0,n._)("div",P,[(0,n._)("div",{class:"cart__item-minus",onClick:r[0]||(r[0]=function(t){return a.decrement(e.product._id)})},S),(0,n._)("div",T,(0,c.zw)(e.count),1),(0,n._)("div",{class:"cart__item-plus",onClick:r[1]||(r[1]=function(t){return a.increment(e.product._id)})},E)]),(0,n._)("div",J,(0,c.zw)(a.formatNumber(a.totalCost))+" ₽",1),(0,n._)("img",{onClick:r[2]||(r[2]=function(t){return a.deleteCartItem(e.product._id)}),class:"cart__item-delete",src:z,alt:""})])}var q=e(69614),Q=e(83421),V=e(41069),X={props:["product","count"],setup:function(t){var r=(0,Q.x)(),e=r.increment,c=r.decrement,a=r.deleteCartItem,u=(0,V.G)(),i=u.getImageUrl,o=(0,n.Fl)((function(){return t.product.price*t.count}));return{totalCost:o,formatNumber:q.uf,increment:e,decrement:c,deleteCartItem:a,getImageUrl:i}}},$=e(40089);const tt=(0,$.Z)(X,[["render",K],["__scopeId","data-v-908a194a"]]);var rt=tt,et=e(13854),nt={components:{Header:x.Z,Callback:Z.Z,Footer:y.Z,CartItem:rt},setup:function(){var t=(0,et.Jk)((0,Q.x)()),r=t.cart,e=(0,Q.x)(),c=e.loadCart,a=e.deleteCartItem,u=(0,V.G)(),i=u.fetchProductsByIds,o=(0,n.Fl)((function(){var t=[];for(var e in r.value)t.push({product:r.value[e].product,count:r.value[e].count});return t})),s=(0,n.Fl)((function(){if(Object.keys(r.value).length>0){var t={_id:Object.keys(r.value)},e=new URLSearchParams(t);return e.toString()}})),l=(0,n.Fl)((function(){var t=0;return o.value.forEach((function(r){t+=r.count*r.product.price})),t}));function _(){return d.apply(this,arguments)}function d(){return d=(0,C.Z)((0,h.Z)().mark((function t(){var e,n,c,u;return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s.value){t.next=12;break}return t.next=3,i(s.value);case 3:e=t.sent,n=(0,h.Z)().mark((function t(n){var c;return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:c=e.find((function(t){return t._id==n})),r.value[n].product=c;case 2:case"end":return t.stop()}}),t)})),t.t0=(0,h.Z)().keys(r.value);case 6:if((t.t1=t.t0()).done){t.next=11;break}return c=t.t1.value,t.delegateYield(n(c),"t2",9);case 9:t.next=6;break;case 11:for(u in r.value)r.value[u].product?0==r.value[u].product.stock&&a(u):a(u);case 12:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}return(0,n.bv)((0,C.Z)((0,h.Z)().mark((function t(){return(0,h.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c(),t.next=3,_();case 3:case"end":return t.stop()}}),t)})))),{cartArr:o,totalCost:l,formatNumber:q.uf}}};const ct=(0,$.Z)(nt,[["render",k],["__scopeId","data-v-6fb8ee69"]]);var at=ct},58737:function(t,r,e){t.exports=e.p+"img/breadcrumbs-arrow.81f459cf.svg"}}]);
//# sourceMappingURL=380.5ec1fe35.js.map