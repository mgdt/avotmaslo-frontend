"use strict";(self["webpackChunkavtomaslo"]=self["webpackChunkavtomaslo"]||[]).push([[400],{11746:function(n,t,e){e.d(t,{q:function(){return i}});var r=e(50124),a=e(48534),u=(e(92222),e(57327),e(41539),e(38862),e(57658),e(44870)),c=e(50086),o=e(46943),s=e(13854),i=(0,s.Q_)("brands",(function(){var n=(0,u.iH)([]);function t(){return e.apply(this,arguments)}function e(){return e=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(c.Z.API_URL,"/brands"));case 2:e=t.sent,n.value=e.data;case 4:case"end":return t.stop()}}),t)}))),e.apply(this,arguments)}function s(){return i.apply(this,arguments)}function i(){return i=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o.Z.get("".concat(c.Z.API_URL,"/brands"));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}),n)}))),i.apply(this,arguments)}function p(n){return l.apply(this,arguments)}function l(){return l=(0,a.Z)((0,r.Z)().mark((function n(t){var e;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,o.Z.get("".concat(c.Z.API_URL,"/brands/").concat(t));case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)}))),l.apply(this,arguments)}function d(n){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,r.Z)().mark((function t(e){var a,u,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",u={Authorization:"Bearer ".concat(a)},t.next=5,o.Z["delete"]("".concat(c.Z.API_URL,"/brands/").concat(e),{headers:u});case 5:t.sent,s=n.value.filter((function(n){return n._id!=e})),n.value=s,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),f.apply(this,arguments)}function h(n){return v.apply(this,arguments)}function v(){return v=(0,a.Z)((0,r.Z)().mark((function t(e){var a,u,s;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",u={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.next=5,o.Z.post("".concat(c.Z.API_URL,"/brands"),JSON.stringify(e),{headers:u});case 5:s=t.sent,n.value.push(s.data),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),v.apply(this,arguments)}function b(n,t){return m.apply(this,arguments)}function m(){return m=(0,a.Z)((0,r.Z)().mark((function n(t,e){var a,u;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",u={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},n.next=5,o.Z.put("".concat(c.Z.API_URL,"/brands/").concat(t),JSON.stringify(e),{headers:u});case 5:n.sent,e.updated=!1,n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0),alert("Ошибка");case 13:case"end":return n.stop()}}),n,null,[[0,9]])}))),m.apply(this,arguments)}return{brands:n,fetchBrands:t,deleteBrand:d,createBrand:h,fetchBrand:p,updateBrand:b,getBrands:s}}))},20400:function(n,t,e){e.r(t),e.d(t,{default:function(){return S}});e(68309);var r=e(73396),a=e(49242),u=function(n){return(0,r.dD)("data-v-f08de51a"),n=n(),(0,r.Cn)(),n},c={class:"container"},o=u((function(){return(0,r._)("h4",{style:{"margin-bottom":"20px"}},"Бренды",-1)})),s={class:"brands"},i=["onSubmit"],p={class:"input-group"},l=u((function(){return(0,r._)("div",{class:"input-group-prepend"},[(0,r._)("span",{class:"input-group-text",id:""},"Название")],-1)})),d=["onInput","onUpdate:modelValue"],f={key:0,class:"btn btn-secondary",style:{"margin-left":"10px"},type:"submit"},h=["onClick"],v={class:"input-group"},b=u((function(){return(0,r._)("div",{class:"input-group-prepend"},[(0,r._)("span",{class:"input-group-text",id:""},"Название")],-1)})),m=u((function(){return(0,r._)("button",{style:{"margin-left":"10px"},class:"btn btn-secondary",type:"submit"}," Добавить ",-1)}));function Z(n,t,e,u,Z,g){return(0,r.wg)(),(0,r.iD)("div",c,[o,(0,r._)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u.brands,(function(n){return(0,r.wg)(),(0,r.iD)("form",{key:n._id,onSubmit:(0,a.iM)((function(t){return u.updateBrand(n._id,n)}),["prevent"]),class:"brand"},[(0,r._)("div",p,[l,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",required:"",onInput:function(t){return n.updated=!0},"onUpdate:modelValue":function(t){return n.name=t}},null,40,d),[[a.nr,n.name]]),n.updated?((0,r.wg)(),(0,r.iD)("button",f," Сохранить ")):(0,r.kq)("",!0),(0,r._)("button",{type:"button",style:{"margin-left":"10px"},class:"btn btn-danger",onClick:function(t){return u.handleDelete(n._id)}}," Удалить ",8,h)])],40,i)})),128)),(0,r._)("form",{onSubmit:t[1]||(t[1]=(0,a.iM)((function(n){return u.handleCreate(u.brand)}),["prevent"])),class:"brand"},[(0,r._)("div",v,[b,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",required:"","onUpdate:modelValue":t[0]||(t[0]=function(n){return u.brand.name=n})},null,512),[[a.nr,u.brand.name]]),m])],32)])])}var g=e(50124),w=e(48534),y=e(44870),x=e(13854),k=e(11746),_={setup:function(){var n=(0,x.Jk)((0,k.q)()),t=n.brands,e=(0,k.q)(),a=e.createBrand,u=e.fetchBrands,c=e.deleteBrand,o=e.updateBrand,s=(0,y.iH)({name:""});function i(n){return p.apply(this,arguments)}function p(){return p=(0,w.Z)((0,g.Z)().mark((function n(t){return(0,g.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!confirm("Удалить бренд?")){n.next=3;break}return n.next=3,c(t);case 3:case"end":return n.stop()}}),n)}))),p.apply(this,arguments)}function l(n){return d.apply(this,arguments)}function d(){return d=(0,w.Z)((0,g.Z)().mark((function n(t){return(0,g.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a(t);case 2:s.value.name="";case 3:case"end":return n.stop()}}),n)}))),d.apply(this,arguments)}return(0,r.bv)((0,w.Z)((0,g.Z)().mark((function n(){return(0,g.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:case"end":return n.stop()}}),n)})))),{handleCreate:l,brand:s,brands:t,handleDelete:i,updateBrand:o}}},B=e(40089);const I=(0,B.Z)(_,[["render",Z],["__scopeId","data-v-f08de51a"]]);var S=I}}]);
//# sourceMappingURL=400.ef8f4eea.js.map