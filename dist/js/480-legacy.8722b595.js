"use strict";(self["webpackChunkavtomaslo"]=self["webpackChunkavtomaslo"]||[]).push([[480],{7764:function(t,e,n){n.d(e,{N:function(){return l}});var r=n(50124),a=n(48534),c=(n(92222),n(38862),n(57327),n(41539),n(46943)),o=n(50086),u=n(13854),i=n(44870),l=(0,u.Q_)("blog",(function(){var t=(0,i.iH)([]);function e(){return u.apply(this,arguments)}function u(){return u=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("".concat(o.Z.API_URL,"/blog"));case 2:n=e.sent,t.value=n.data;case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(t){return s.apply(this,arguments)}function s(){return s=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.Z.get("".concat(o.Z.API_URL,"/blog/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function p(t){return f.apply(this,arguments)}function f(){return f=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.Z.get("".concat(o.Z.API_URL,"/blog/slug/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function d(t){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=localStorage.getItem("token")?localStorage.getItem("token"):"",a={"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},t.next=5,c.Z.post("".concat(o.Z.API_URL,"/blog"),JSON.stringify(e),{headers:a});case 5:t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),h.apply(this,arguments)}function g(t){return v.apply(this,arguments)}function v(){return v=(0,a.Z)((0,r.Z)().mark((function e(n){var a,u,i;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",u={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},e.next=5,c.Z["delete"]("".concat(o.Z.API_URL,"/blog/").concat(n),{headers:u});case 5:e.sent,i=t.value.filter((function(t){return t._id!=n})),t.value=i,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),alert("Ошибка");case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),v.apply(this,arguments)}function Z(t,e){return b.apply(this,arguments)}function b(){return b=(0,a.Z)((0,r.Z)().mark((function t(e,n){var a,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",u={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.next=5,c.Z.put("".concat(o.Z.API_URL,"/blog/").concat(e),JSON.stringify(n),{headers:u});case 5:t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),b.apply(this,arguments)}function w(t){return t.imageUrl?o.Z.API_URL+t.imageUrl:n(1802)}return{articles:t,fetchArticles:e,fetchArticle:l,fetchArticleBySlug:p,createArticle:d,deleteArticle:g,updateArticle:Z,getImageUrl:w}}))},19480:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var r=n(73396),a=n(87139),c=function(t){return(0,r.dD)("data-v-af077f6c"),t=t(),(0,r.Cn)(),t},o={class:"container"},u=c((function(){return(0,r._)("h3",null,"Блог",-1)})),i={class:"table"},l=["onClick"];function s(t,e,n,c,s,p){var f=(0,r.up)("RouterLink");return(0,r.wg)(),(0,r.iD)("div",o,[u,(0,r.Wm)(f,{to:"/admin/blog/create",class:"btn btn-secondary",style:{"margin-top":"20px","margin-bottom":"40px"}},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Создать статью ")]})),_:1}),(0,r._)("table",i,[(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(c.blogStore.articles,(function(t){return(0,r.wg)(),(0,r.iD)("tr",{key:t._id},[(0,r._)("td",null,(0,a.zw)(t.title),1),(0,r._)("td",null,[(0,r.Wm)(f,{class:"btn btn-secondary",to:"/admin/blog/edit/".concat(t._id)},{default:(0,r.w5)((function(){return[(0,r.Uk)("Редактировать")]})),_:2},1032,["to"])]),(0,r._)("td",null,[(0,r._)("button",{onClick:function(e){return c.handleDelete(t._id)},class:"btn btn-danger"}," Удалить ",8,l)])])})),128))])])])}var p=n(50124),f=n(48534),d=n(7764),h={setup:function(){var t=(0,d.N)();function e(e){confirm("Удалить статью?")&&t.deleteArticle(e)}return(0,r.bv)((0,f.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchArticles();case 2:case"end":return e.stop()}}),e)})))),{blogStore:t,handleDelete:e}}},g=n(40089);const v=(0,g.Z)(h,[["render",s],["__scopeId","data-v-af077f6c"]]);var Z=v},1802:function(t,e,n){t.exports=n.p+"img/placeholder.d5f1d603.jpg"}}]);
//# sourceMappingURL=480-legacy.8722b595.js.map