{"version":3,"file":"js/400.ef8f4eea.js","mappings":"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","sources":["webpack://avtomaslo/./src/stores/brands.js","webpack://avtomaslo/./src/views-admin/AdminBrands.vue","webpack://avtomaslo/./src/views-admin/AdminBrands.vue?b064"],"sourcesContent":["import { ref } from \"vue\";\r\nimport config from \"@/config.js\";\r\nimport axios from \"axios\";\r\nimport { defineStore } from \"pinia\";\r\n\r\nexport const useBrandsStore = defineStore(\"brands\", () => {\r\n  const brands = ref([]);\r\n\r\n  async function fetchBrands() {\r\n    const response = await axios.get(`${config.API_URL}/brands`);\r\n    brands.value = response.data;\r\n  }\r\n\r\n  async function getBrands() {\r\n    const response = await axios.get(`${config.API_URL}/brands`);\r\n    return response.data;\r\n  }\r\n\r\n  async function fetchBrand(id) {\r\n    const response = await axios.get(`${config.API_URL}/brands/${id}`);\r\n    return response.data;\r\n  }\r\n\r\n  async function deleteBrand(id) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n      const response = await axios.delete(`${config.API_URL}/brands/${id}`, {\r\n        headers,\r\n      });\r\n      const filteredBrands = brands.value.filter((brand) => brand._id != id);\r\n      brands.value = filteredBrands;\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function createBrand(brand) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `${config.API_URL}/brands`,\r\n        JSON.stringify(brand),\r\n        { headers }\r\n      );\r\n      brands.value.push(response.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function updateBrand(id, brand) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.put(\r\n        `${config.API_URL}/brands/${id}`,\r\n        JSON.stringify(brand),\r\n        { headers }\r\n      );\r\n      brand.updated = false;\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    brands,\r\n    fetchBrands,\r\n    deleteBrand,\r\n    createBrand,\r\n    fetchBrand,\r\n    updateBrand,\r\n    getBrands,\r\n  };\r\n});\r\n","<script>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { useBrandsStore } from \"@/stores/brands.js\";\r\n\r\nexport default {\r\n  setup() {\r\n    const { brands } = storeToRefs(useBrandsStore());\r\n    const { createBrand, fetchBrands, deleteBrand, updateBrand } =\r\n      useBrandsStore();\r\n    const brand = ref({\r\n      name: \"\",\r\n    });\r\n\r\n    async function handleDelete(id) {\r\n      if (confirm(\"Удалить бренд?\")) {\r\n        await deleteBrand(id);\r\n      }\r\n    }\r\n\r\n    async function handleCreate(brandVal) {\r\n      await createBrand(brandVal);\r\n      brand.value.name = \"\";\r\n    }\r\n\r\n    onMounted(async () => {\r\n      await fetchBrands();\r\n    });\r\n\r\n    return {\r\n      handleCreate,\r\n      brand,\r\n      brands,\r\n      handleDelete,\r\n      updateBrand,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container\">\r\n    <h4 style=\"margin-bottom: 20px\">Бренды</h4>\r\n    <div class=\"brands\">\r\n      <form\r\n        v-for=\"brand in brands\"\r\n        :key=\"brand._id\"\r\n        @submit.prevent=\"updateBrand(brand._id, brand)\"\r\n        class=\"brand\"\r\n      >\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Название</span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            required\r\n            @input=\"brand.updated = true\"\r\n            v-model=\"brand.name\"\r\n          />\r\n          <button\r\n            v-if=\"brand.updated\"\r\n            class=\"btn btn-secondary\"\r\n            style=\"margin-left: 10px\"\r\n            type=\"submit\"\r\n          >\r\n            Сохранить\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            style=\"margin-left: 10px\"\r\n            class=\"btn btn-danger\"\r\n            @click=\"handleDelete(brand._id)\"\r\n          >\r\n            Удалить\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <form @submit.prevent=\"handleCreate(brand)\" class=\"brand\">\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Название</span>\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            required\r\n            v-model=\"brand.name\"\r\n          />\r\n          <button\r\n            style=\"margin-left: 10px\"\r\n            class=\"btn btn-secondary\"\r\n            type=\"submit\"\r\n          >\r\n            Добавить\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped src=\"../assets/libs/bootstrap.min.css\"></style>\r\n\r\n<style scoped>\r\n.admin .input-group {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./AdminBrands.vue?vue&type=template&id=f08de51a&scoped=true\"\nimport script from \"./AdminBrands.vue?vue&type=script&lang=js\"\nexport * from \"./AdminBrands.vue?vue&type=script&lang=js\"\n\nimport \"../assets/libs/bootstrap.min.css?vue&type=style&index=0&id=f08de51a&scoped=true&lang=css\"\nimport \"./AdminBrands.vue?vue&type=style&index=1&id=f08de51a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Grigoriy\\\\Desktop\\\\avtomaslo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f08de51a\"]])\n\nexport default __exports__"],"names":["useBrandsStore","defineStore","brands","ref","fetchBrands","axios","config","response","value","data","getBrands","fetchBrand","id","deleteBrand","token","localStorage","getItem","headers","Authorization","filteredBrands","filter","brand","_id","console","log","alert","createBrand","JSON","stringify","push","updateBrand","updated","class","_createElementVNode","style","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_Fragment","$setup","key","onSubmit","_hoisted_5","_hoisted_6","required","onInput","name","_hoisted_8","onClick","_hoisted_10","_hoisted_11","_hoisted_12","setup","storeToRefs","handleDelete","confirm","handleCreate","brandVal","onMounted","__exports__","render"],"sourceRoot":""}