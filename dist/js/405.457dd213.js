"use strict";(self["webpackChunkavtomaslo"]=self["webpackChunkavtomaslo"]||[]).push([[405],{41069:function(t,e,n){n.d(e,{G:function(){return i}});var r=n(50124),a=n(48534),c=(n(47941),n(41539),n(78783),n(33948),n(41637),n(92222),n(39714),n(57327),n(38862),n(44870)),u=n(50086),o=n(46943),s=n(13854),i=(0,s.Q_)("products",(function(){var t=(0,c.iH)([]),e=(0,c.iH)("_id"),s=(0,c.iH)("-1"),i=(0,c.iH)({}),l=(0,c.iH)("");function p(){return d.apply(this,arguments)}function d(){return d=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products/minMaxValues"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,r.Z)().mark((function n(){var a,c;return(0,r.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(l.value&&(i.value.category=l.value),!(Object.keys(i.value).length>0)){n.next=8;break}return c=new URLSearchParams(i.value),n.next=5,o.Z.get("".concat(u.Z.API_URL,"/products?sort=").concat(e.value,"&sortDir=").concat(s.value,"&").concat(c.toString()));case 5:a=n.sent,n.next=11;break;case 8:return n.next=10,o.Z.get("".concat(u.Z.API_URL,"/products?sort=").concat(e.value,"&sortDir=").concat(s.value));case 10:a=n.sent;case 11:t.value=a.data;case 12:case"end":return n.stop()}}),n)}))),h.apply(this,arguments)}function v(t){return Z.apply(this,arguments)}function Z(){return Z=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products?").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function g(t){return m.apply(this,arguments)}function m(){return m=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)}))),m.apply(this,arguments)}function _(){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products?isBest=true"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}function y(){return k.apply(this,arguments)}function k(){return k=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products/filterFields"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),k.apply(this,arguments)}function x(){return b.apply(this,arguments)}function b(){return b=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.Z.get("".concat(u.Z.API_URL,"/products/deliveryText"));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function I(t){return P.apply(this,arguments)}function P(){return P=(0,a.Z)((0,r.Z)().mark((function e(n){var a,c,s;return(0,r.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",c={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},e.next=5,o.Z["delete"]("".concat(u.Z.API_URL,"/products/").concat(n),{headers:c});case 5:e.sent,s=t.value.filter((function(t){return t._id!=n})),t.value=s,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),alert("Ошибка");case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),P.apply(this,arguments)}function U(t){return A.apply(this,arguments)}function A(){return A=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=localStorage.getItem("token")?localStorage.getItem("token"):"",a={"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},t.next=5,o.Z.post("".concat(u.Z.API_URL,"/products"),JSON.stringify(e),{headers:a});case 5:t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),A.apply(this,arguments)}function L(t,e){return R.apply(this,arguments)}function R(){return R=(0,a.Z)((0,r.Z)().mark((function t(e,n){var a,c;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token")?localStorage.getItem("token"):"",c={"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},t.next=5,o.Z.put("".concat(u.Z.API_URL,"/products/").concat(e),JSON.stringify(n),{headers:c});case 5:t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),R.apply(this,arguments)}function S(t){return C.apply(this,arguments)}function C(){return C=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=localStorage.getItem("token")?localStorage.getItem("token"):"",a={"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},t.next=5,o.Z.put("".concat(u.Z.API_URL,"/products/deliveryText"),JSON.stringify({text:e}),{headers:a});case 5:t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),alert("Ошибка");case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),C.apply(this,arguments)}function D(t){return t.imageUrl?u.Z.API_URL+t.imageUrl:n(1802)}return{products:t,filterCategory:l,sort:e,sortDir:s,filtersBody:i,fetchProducts:f,getImageUrl:D,deleteProduct:I,createProduct:U,fetchProduct:g,updateProduct:L,updateDeliveryText:S,fetchMinMaxValues:p,fetchFilterFields:y,fetchDeliveryText:x,fetchProductsByIds:v,fetchBestProducts:_}}))},36405:function(t,e,n){n.r(e),n.d(e,{default:function(){return A}});var r=n(73396),a={class:"container"};function c(t,e,n,c,u,o){var s=(0,r.up)("RouterLink"),i=(0,r.up)("ProductList");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(s,{to:"/admin/product/create",class:"btn btn-secondary"},{default:(0,r.w5)((function(){return[(0,r.Uk)(" Создать товар ")]})),_:1}),(0,r.Wm)(i)])}n(68309);var u=n(87139),o=function(t){return(0,r.dD)("data-v-b84aebda"),t=t(),(0,r.Cn)(),t},s={class:"admin-products"},i=o((function(){return(0,r._)("h3",null,"Список товаров",-1)})),l=["src"],p={class:"admin-product__info"},d={class:"table"},f=o((function(){return(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"Название"),(0,r._)("th",{scope:"col"},"Цена"),(0,r._)("th",{scope:"col"},"Объем"),(0,r._)("th",{scope:"col"},"Категория"),(0,r._)("th",{scope:"col"},"Бренд")])],-1)})),h=["innerHTML"],v={class:"admin-product__btns"},Z=["onClick"];function g(t,e,n,a,c,o){var g=(0,r.up)("RouterLink");return(0,r.wg)(),(0,r.iD)("div",s,[i,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.products,(function(t){return(0,r.wg)(),(0,r.iD)("div",{class:"admin-product",key:t._id},[(0,r._)("img",{src:a.getImageUrl(t),class:"admin-product__image"},null,8,l),(0,r._)("div",p,[(0,r._)("table",d,[f,(0,r._)("tbody",null,[(0,r._)("tr",null,[(0,r._)("td",null,(0,u.zw)(t.name),1),(0,r._)("td",null,(0,u.zw)(t.price),1),(0,r._)("td",null,(0,u.zw)(t.volume)+" "+(0,u.zw)(t.volumeUnits),1),(0,r._)("td",{innerHTML:a.getProductCategory(t)},null,8,h),(0,r._)("td",null,(0,u.zw)(a.getFieldName(t.brand)),1)])])])]),(0,r._)("div",v,[(0,r.Wm)(g,{to:"/admin/product/edit/"+t._id,class:"btn btn-secondary"},{default:(0,r.w5)((function(){return[(0,r.Uk)("Редактировать")]})),_:2},1032,["to"]),(0,r._)("button",{onClick:function(e){return a.handleDelete(t._id)},class:"btn btn-danger"}," Удалить ",8,Z)])])})),128))])}var m=n(50124),_=n(48534),w=(n(74916),n(15306),n(68757),n(13854)),y=n(41069),k={setup:function(){var t=(0,y.G)(),e=t.fetchProducts,n=t.getImageUrl,a=t.deleteProduct,c=(0,w.Jk)((0,y.G)()),u=c.products;function o(t){confirm("Удалить товар?")&&a(t)}var s=function(t){return t.category?t.category.name.replaceAll("<b>","").replaceAll("</b>","").replaceAll("\n","<br>"):"Нет информации"};function i(t){return t&&t.name?t.name:"Нет информации"}return(0,r.bv)((0,_.Z)((0,m.Z)().mark((function t(){return(0,m.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})))),{products:u,getImageUrl:n,handleDelete:o,getProductCategory:s,getFieldName:i}}},x=n(40089);const b=(0,x.Z)(k,[["render",g],["__scopeId","data-v-b84aebda"]]);var I=b,P={components:{ProductList:I},setup:function(){}};const U=(0,x.Z)(P,[["render",c],["__scopeId","data-v-06466808"]]);var A=U},1802:function(t,e,n){t.exports=n.p+"img/placeholder.d5f1d603.jpg"}}]);
//# sourceMappingURL=405.457dd213.js.map