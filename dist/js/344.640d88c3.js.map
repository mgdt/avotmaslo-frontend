{"version":3,"file":"js/344.640d88c3.js","mappings":"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","sources":["webpack://avtomaslo/./src/stores/faq.js","webpack://avtomaslo/./src/views-admin/AdminFaq.vue","webpack://avtomaslo/./src/views-admin/AdminFaq.vue?adb4"],"sourcesContent":["import axios from \"axios\";\r\nimport config from \"@/config\";\r\nimport { defineStore } from \"pinia\";\r\nimport { ref } from \"vue\";\r\n\r\nexport const useFaqStore = defineStore(\"faq\", () => {\r\n  const faqs = ref([]);\r\n\r\n  async function fetchFaqs() {\r\n    const response = await axios.get(`${config.API_URL}/faq`);\r\n    faqs.value = response.data;\r\n  }\r\n\r\n  async function fetchFaq(id) {\r\n    const response = await axios.get(`${config.API_URL}/faq/${id}`);\r\n    return response.data;\r\n  }\r\n\r\n  async function createFaq(faq) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `${config.API_URL}/faq`,\r\n        JSON.stringify(faq),\r\n        { headers }\r\n      );\r\n      faqs.value.push(response.data);\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function deleteFaq(id) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.delete(`${config.API_URL}/faq/${id}`, {\r\n        headers,\r\n      });\r\n      const filteredFaqs = faqs.value.filter((faq) => faq._id != id);\r\n      faqs.value = filteredFaqs;\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function updateFaq(id, faq) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.put(\r\n        `${config.API_URL}/faq/${id}`,\r\n        JSON.stringify(faq),\r\n        { headers }\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    faqs,\r\n    fetchFaqs,\r\n    fetchFaq,\r\n    createFaq,\r\n    deleteFaq,\r\n    updateFaq,\r\n  };\r\n});\r\n","<script setup>\r\nimport { useFaqStore } from \"@/stores/faq.js\";\r\nimport { ref, onMounted } from \"vue\";\r\n\r\nconst newFaq = ref({\r\n  title: \"\",\r\n  content: \"\",\r\n});\r\nconst faqStore = useFaqStore();\r\n\r\nasync function handleAdd() {\r\n  await faqStore.createFaq(newFaq.value);\r\n  newFaq.value.title = \"\";\r\n  newFaq.value.content = \"\";\r\n}\r\n\r\nfunction handleUpdate(id, faq) {\r\n  faq.updated = false;\r\n  faqStore.updateFaq(id, faq);\r\n}\r\n\r\nfunction handleDelete(id) {\r\n  if (confirm(\"Удалить вопрос?\")) {\r\n    faqStore.deleteFaq(id);\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await faqStore.fetchFaqs();\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container\">\r\n    <h3>Часто задаваемые вопросы</h3>\r\n    <div class=\"faqs\">\r\n      <form\r\n        @submit.prevent=\"handleUpdate(faq._id, faq)\"\r\n        class=\"faq\"\r\n        v-for=\"faq in faqStore.faqs\"\r\n        :key=\"faq._id\"\r\n      >\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Вопрос</span>\r\n          </div>\r\n          <input\r\n            class=\"form-control\"\r\n            @input=\"faq.updated = true\"\r\n            required\r\n            v-model=\"faq.title\"\r\n          />\r\n        </div>\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Ответ</span>\r\n          </div>\r\n          <textarea\r\n            rows=\"3\"\r\n            class=\"form-control\"\r\n            required\r\n            @input=\"faq.updated = true\"\r\n            v-model=\"faq.content\"\r\n          ></textarea>\r\n        </div>\r\n        <button\r\n          style=\"margin-right: 10px\"\r\n          v-if=\"faq.updated\"\r\n          class=\"btn btn-secondary\"\r\n          type=\"submit\"\r\n        >\r\n          Сохранить\r\n        </button>\r\n        <button\r\n          @click=\"handleDelete(faq._id)\"\r\n          type=\"button\"\r\n          class=\"btn btn-danger\"\r\n        >\r\n          Удалить\r\n        </button>\r\n        <hr />\r\n      </form>\r\n      <form @submit.prevent=\"handleAdd\" class=\"faq\">\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Вопрос</span>\r\n          </div>\r\n          <input class=\"form-control\" required v-model=\"newFaq.title\" />\r\n        </div>\r\n        <div class=\"input-group\">\r\n          <div class=\"input-group-prepend\">\r\n            <span class=\"input-group-text\" id=\"\">Ответ</span>\r\n          </div>\r\n          <textarea\r\n            rows=\"3\"\r\n            class=\"form-control\"\r\n            required\r\n            v-model=\"newFaq.content\"\r\n          ></textarea>\r\n        </div>\r\n        <button type=\"submit\" class=\"btn btn-secondary\">Добавить</button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped src=\"../assets/libs/bootstrap.min.css\"></style>\r\n\r\n<style scoped>\r\nh3 {\r\n  margin-bottom: 20px;\r\n}\r\nhr {\r\n  margin-top: 30px;\r\n  margin-bottom: 30px;\r\n}\r\n.admin .input-group {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n","import script from \"./AdminFaq.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AdminFaq.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"../assets/libs/bootstrap.min.css?vue&type=style&index=0&id=53c51ccf&scoped=true&lang=css\"\nimport \"./AdminFaq.vue?vue&type=style&index=1&id=53c51ccf&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Grigoriy\\\\Desktop\\\\avtomaslo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53c51ccf\"]])\n\nexport default __exports__"],"names":["useFaqStore","defineStore","faqs","ref","fetchFaqs","axios","config","response","value","data","fetchFaq","id","createFaq","faq","token","localStorage","getItem","headers","Authorization","JSON","stringify","push","console","log","alert","deleteFaq","filteredFaqs","filter","_id","updateFaq","newFaq","title","content","faqStore","handleAdd","handleUpdate","updated","handleDelete","confirm","onMounted","__exports__"],"sourceRoot":""}