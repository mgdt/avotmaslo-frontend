{"version":3,"file":"js/545.72933030.js","mappings":"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","sources":["webpack://avtomaslo/./src/composables/useAdminArticle.js","webpack://avtomaslo/./src/stores/blog.js","webpack://avtomaslo/./src/components-admin/ArticleForm.vue","webpack://avtomaslo/./src/components-admin/ImageUploaderArticle.vue","webpack://avtomaslo/./src/components-admin/ImageUploaderArticle.vue?7af5","webpack://avtomaslo/./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack://avtomaslo/./node_modules/@babel/runtime/helpers/esm/get.js","webpack://avtomaslo/./node_modules/quill-image-uploader/src/blots/image.js","webpack://avtomaslo/./node_modules/quill-image-uploader/src/quill.imageUploader.js","webpack://avtomaslo/./src/components-admin/ArticleForm.vue?9d11"],"sourcesContent":["import { ref } from \"vue\";\r\n\r\nexport default function useAdminProduct() {\r\n  const article = ref({\r\n    imageUrl: \"\",\r\n    title: \"\",\r\n    content: \"\",\r\n    slug: \"\",\r\n  });\r\n\r\n  return {\r\n    article,\r\n  };\r\n}\r\n","import axios from \"axios\";\r\nimport config from \"@/config\";\r\nimport { defineStore } from \"pinia\";\r\nimport { ref } from \"vue\";\r\n\r\nexport const useBlogStore = defineStore(\"blog\", () => {\r\n  const articles = ref([]);\r\n\r\n  async function fetchArticles() {\r\n    const response = await axios.get(`${config.API_URL}/blog`);\r\n    articles.value = response.data;\r\n  }\r\n\r\n  async function fetchArticle(id) {\r\n    const response = await axios.get(`${config.API_URL}/blog/${id}`);\r\n    return response.data;\r\n  }\r\n\r\n  async function fetchArticleBySlug(slug) {\r\n    const response = await axios.get(`${config.API_URL}/blog/slug/${slug}`);\r\n    return response.data;\r\n  }\r\n\r\n  async function createArticle(article) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.post(\r\n        `${config.API_URL}/blog`,\r\n        JSON.stringify(article),\r\n        { headers }\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function deleteArticle(id) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.delete(`${config.API_URL}/blog/${id}`, {\r\n        headers,\r\n      });\r\n      const filteredArticles = articles.value.filter(\r\n        (article) => article._id != id\r\n      );\r\n      articles.value = filteredArticles;\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  async function updateArticle(id, article) {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n\r\n      const response = await axios.put(\r\n        `${config.API_URL}/blog/${id}`,\r\n        JSON.stringify(article),\r\n        { headers }\r\n      );\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(\"Ошибка\");\r\n    }\r\n  }\r\n\r\n  function getImageUrl(article) {\r\n    if (article.imageUrl) {\r\n      return config.API_URL + article.imageUrl;\r\n    }\r\n    return require(\"@/assets/img/placeholder.jpg\");\r\n  }\r\n\r\n  return {\r\n    articles,\r\n    fetchArticles,\r\n    fetchArticle,\r\n    fetchArticleBySlug,\r\n    createArticle,\r\n    deleteArticle,\r\n    updateArticle,\r\n    getImageUrl,\r\n  };\r\n});\r\n","<script>\r\nimport ImageUploaderArticle from \"@/components-admin/ImageUploaderArticle.vue\";\r\nimport { QuillEditor } from \"@vueup/vue-quill\";\r\nimport ImageUploader from \"quill-image-uploader\";\r\nimport \"@vueup/vue-quill/dist/vue-quill.snow.css\";\r\nimport axios from \"axios\";\r\nimport config from \"@/config\";\r\n\r\nexport default {\r\n  components: {\r\n    ImageUploaderArticle,\r\n    QuillEditor,\r\n  },\r\n  props: [\"article\", \"handleSubmit\", \"updateImage\"],\r\n  setup() {\r\n    const modules = {\r\n      name: \"imageUploader\",\r\n      module: ImageUploader,\r\n      options: {\r\n        upload: (file) => {\r\n          return new Promise((resolve, reject) => {\r\n            const formData = new FormData();\r\n            formData.append(\"file\", file);\r\n            const token = localStorage.getItem(\"token\")\r\n              ? localStorage.getItem(\"token\")\r\n              : \"\";\r\n            const headers = {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n              Authorization: `Bearer ${token}`,\r\n            };\r\n\r\n            axios\r\n              .post(`${config.API_URL}/upload`, formData, { headers })\r\n              .then((res) => {\r\n                console.log(res);\r\n                resolve(`${config.API_URL}/uploads/${res.data.filename}`);\r\n              })\r\n              .catch((err) => {\r\n                reject(\"Upload failed\");\r\n                console.error(\"Error:\", err);\r\n              });\r\n          });\r\n        },\r\n      },\r\n    };\r\n    return {\r\n      modules,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <form @submit.prevent=\"handleSubmit\">\r\n    <div class=\"input-group\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\" id=\"\">Заголовок</span>\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        required\r\n        v-model=\"article.title\"\r\n      />\r\n    </div>\r\n    <div class=\"input-group\">\r\n      <div class=\"input-group-prepend\">\r\n        <span class=\"input-group-text\" id=\"\">ID</span>\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        required\r\n        placeholder=\"Без пробелов на англ. языке\"\r\n        v-model=\"article.slug\"\r\n      />\r\n    </div>\r\n\r\n    <label style=\"margin-top: 5px; margin-bottom: 10px\">Текст статьи:</label>\r\n    <QuillEditor\r\n      v-model:content=\"article.content\"\r\n      contentType=\"html\"\r\n      style=\"margin-bottom: 20px\"\r\n      toolbar=\"full\"\r\n      :modules=\"modules\"\r\n    />\r\n\r\n    <label>Картинка для списка:</label>\r\n    <ImageUploaderArticle\r\n      :imageUrlProp=\"article.imageUrl\"\r\n      @updateImage=\"updateImage\"\r\n      :imageMaxWidth=\"300\"\r\n      :wrapSize=\"300\"\r\n    />\r\n\r\n    <button class=\"btn btn-secondary\" type=\"submit\">Сохранить</button>\r\n  </form>\r\n</template>\r\n\r\n<style scoped src=\"../assets/libs/bootstrap.min.css\"></style>\r\n\r\n<style scoped>\r\n.admin .input-group {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n","<script>\r\nimport { onMounted, onUpdated, ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport config from \"@/config\";\r\n\r\nexport default {\r\n  props: [\"imageUrlProp\", \"extraInfo\", \"imageMaxWidth\", \"wrapSize\"],\r\n  emits: [\"updateImage\"],\r\n  setup(props, context) {\r\n    const fileInput = ref(null);\r\n    const imageUrl = ref(\"\");\r\n\r\n    async function handleFileInputChange() {\r\n      if (fileInput.value.files[0]) {\r\n        uploadFile();\r\n      }\r\n    }\r\n\r\n    async function uploadFile() {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileInput.value.files[0]);\r\n      const token = localStorage.getItem(\"token\")\r\n        ? localStorage.getItem(\"token\")\r\n        : \"\";\r\n      const headers = {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n      const response = await axios.post(`${config.API_URL}/upload`, formData, {\r\n        headers,\r\n      });\r\n      imageUrl.value = \"/uploads/\" + response.data.filename;\r\n      context.emit(\r\n        \"updateImage\",\r\n        \"/uploads/\" + response.data.filename,\r\n        props.extraInfo\r\n      );\r\n    }\r\n\r\n    onMounted(() => {\r\n      imageUrl.value = props.imageUrlProp;\r\n    });\r\n\r\n    onUpdated(() => {\r\n      imageUrl.value = props.imageUrlProp;\r\n    });\r\n\r\n    return {\r\n      handleFileInputChange,\r\n      fileInput,\r\n      imageUrl,\r\n      config,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"input-group\">\r\n    <label\r\n      class=\"image-wrap\"\r\n      :style=\"`width: ${wrapSize}px; height: ${wrapSize}px`\"\r\n    >\r\n      <img\r\n        v-if=\"imageUrl\"\r\n        :src=\"config.API_URL + imageUrl\"\r\n        :style=\"`max-width: ${imageMaxWidth}px; max-height: ${imageMaxWidth}px;`\"\r\n        class=\"image-wrap-img\"\r\n        alt=\"\"\r\n      />\r\n      <div class=\"image-overlay\">\r\n        <span>Нажмите, чтобы загрузить или обновить изображение</span>\r\n      </div>\r\n      <span class=\"image-wrap-text\" v-if=\"!imageUrl\"\r\n        >Нажмите, чтобы загрузить или обновить изображение</span\r\n      >\r\n      <input type=\"file\" ref=\"fileInput\" @change=\"handleFileInputChange\" />\r\n    </label>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\ninput[type=\"file\"] {\r\n  display: none;\r\n}\r\n.image-wrap {\r\n  width: 300px;\r\n  height: 300px;\r\n  border: 1px solid lightgray;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n.image-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  opacity: 0;\r\n  visibility: hidden;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  color: white;\r\n  z-index: 3;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.image-wrap-text {\r\n  transition-duration: 0.2s;\r\n}\r\n.image-wrap:hover .image-wrap-text {\r\n  visibility: hidden;\r\n  opacity: 0;\r\n}\r\n.image-wrap:hover .image-overlay {\r\n  opacity: 1;\r\n  visibility: visible;\r\n}\r\n.image-wrap-img {\r\n  max-width: 170px;\r\n}\r\n</style>\r\n","import { render } from \"./ImageUploaderArticle.vue?vue&type=template&id=4ec9fff4&scoped=true\"\nimport script from \"./ImageUploaderArticle.vue?vue&type=script&lang=js\"\nexport * from \"./ImageUploaderArticle.vue?vue&type=script&lang=js\"\n\nimport \"./ImageUploaderArticle.vue?vue&type=style&index=0&id=4ec9fff4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Grigoriy\\\\Desktop\\\\avtomaslo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4ec9fff4\"]])\n\nexport default __exports__","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import Quill from \"quill\";\r\n\r\nconst InlineBlot = Quill.import(\"blots/block\");\r\n\r\nclass LoadingImage extends InlineBlot {\r\n    static create(src) {\r\n        const node = super.create(src);\r\n        if (src === true) return node;\r\n\r\n        const image = document.createElement(\"img\");\r\n        image.setAttribute(\"src\", src);\r\n        node.appendChild(image);\r\n        return node;\r\n    }\r\n    deleteAt(index, length) {\r\n        super.deleteAt(index, length);\r\n        this.cache = {};\r\n    }\r\n    static value(domNode) {\r\n        const { src, custom } = domNode.dataset;\r\n        return { src, custom };\r\n    }\r\n}\r\n\r\nLoadingImage.blotName = \"imageBlot\";\r\nLoadingImage.className = \"image-uploading\";\r\nLoadingImage.tagName = \"span\";\r\nQuill.register({ \"formats/imageBlot\": LoadingImage });\r\n\r\nexport default LoadingImage;","import LoadingImage from \"./blots/image.js\";\r\n\r\nimport \"./quill.imageUploader.css\";\r\n\r\nclass ImageUploader {\r\n    constructor(quill, options) {\r\n        this.quill = quill;\r\n        this.options = options;\r\n        this.range = null;             \r\n        this.placeholderDelta = null; \r\n\r\n        if (typeof this.options.upload !== \"function\")\r\n            console.warn(\r\n                \"[Missing config] upload function that returns a promise is required\"\r\n            );\r\n\r\n        var toolbar = this.quill.getModule(\"toolbar\");\r\n        if (toolbar) {\r\n            toolbar.addHandler(\"image\", this.selectLocalImage.bind(this));\r\n        }\r\n\r\n        this.handleDrop = this.handleDrop.bind(this);\r\n        this.handlePaste = this.handlePaste.bind(this);\r\n\r\n        this.quill.root.addEventListener(\"drop\", this.handleDrop, false);\r\n        this.quill.root.addEventListener(\"paste\", this.handlePaste, false);\r\n    }\r\n\r\n    selectLocalImage() {\r\n        this.quill.focus();\r\n        this.range = this.quill.getSelection();\r\n        this.fileHolder = document.createElement(\"input\");\r\n        this.fileHolder.setAttribute(\"type\", \"file\");\r\n        this.fileHolder.setAttribute(\"accept\", \"image/*\");\r\n        this.fileHolder.setAttribute(\"style\", \"visibility:hidden\");\r\n\r\n        this.fileHolder.onchange = this.fileChanged.bind(this);\r\n\r\n        document.body.appendChild(this.fileHolder);\r\n\r\n        this.fileHolder.click();\r\n\r\n        window.requestAnimationFrame(() => {\r\n            document.body.removeChild(this.fileHolder);\r\n        });\r\n    }\r\n\r\n    handleDrop(evt) {\r\n        if (\r\n            evt.dataTransfer &&\r\n            evt.dataTransfer.files &&\r\n            evt.dataTransfer.files.length\r\n        ) {\r\n            evt.stopPropagation();\r\n            evt.preventDefault();\r\n            if (document.caretRangeFromPoint) {\r\n                const selection = document.getSelection();\r\n                const range = document.caretRangeFromPoint(evt.clientX, evt.clientY);\r\n                if (selection && range) {\r\n                    selection.setBaseAndExtent(\r\n                        range.startContainer,\r\n                        range.startOffset,\r\n                        range.startContainer,\r\n                        range.startOffset\r\n                    );\r\n                }\r\n            } else {\r\n                const selection = document.getSelection();\r\n                const range = document.caretPositionFromPoint(evt.clientX, evt.clientY);\r\n                if (selection && range) {\r\n                    selection.setBaseAndExtent(\r\n                        range.offsetNode,\r\n                        range.offset,\r\n                        range.offsetNode,\r\n                        range.offset\r\n                    );\r\n                }\r\n            }\r\n\r\n            this.quill.focus();\r\n            this.range = this.quill.getSelection();\r\n            let file = evt.dataTransfer.files[0];\r\n\r\n            setTimeout(() => {\r\n                this.quill.focus();\r\n                this.range = this.quill.getSelection();\r\n                this.readAndUploadFile(file);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    handlePaste(evt) {\r\n        let clipboard = evt.clipboardData || window.clipboardData;\r\n\r\n        // IE 11 is .files other browsers are .items\r\n        if (clipboard && (clipboard.items || clipboard.files)) {\r\n            let items = clipboard.items || clipboard.files;\r\n            const IMAGE_MIME_REGEX = /^image\\/(jpe?g|gif|png|svg|webp)$/i;\r\n\r\n            for (let i = 0; i < items.length; i++) {\r\n                if (IMAGE_MIME_REGEX.test(items[i].type)) {\r\n                    let file = items[i].getAsFile ? items[i].getAsFile() : items[i];\r\n\r\n                    if (file) {\r\n                        this.quill.focus();\r\n                        this.range = this.quill.getSelection();\r\n                        evt.preventDefault();\r\n                        setTimeout(() => {\r\n                            this.quill.focus();\r\n                            this.range = this.quill.getSelection();\r\n                            this.readAndUploadFile(file);\r\n                        }, 0);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    readAndUploadFile(file) {\r\n        let isUploadReject = false;\r\n\r\n        const fileReader = new FileReader();\r\n\r\n        fileReader.addEventListener(\r\n            \"load\",\r\n            () => {\r\n                if (!isUploadReject) {\r\n                    let base64ImageSrc = fileReader.result;\r\n                    this.insertBase64Image(base64ImageSrc);\r\n                }\r\n            },\r\n            false\r\n        );\r\n\r\n        if (file) {\r\n            fileReader.readAsDataURL(file);\r\n        }\r\n\r\n        this.options.upload(file).then(\r\n            (imageUrl) => {\r\n                this.insertToEditor(imageUrl);\r\n            },\r\n            (error) => {\r\n                isUploadReject = true;\r\n                this.removeBase64Image();\r\n                console.warn(error);\r\n            }\r\n        );\r\n    }\r\n\r\n    fileChanged() {\r\n        const file = this.fileHolder.files[0];\r\n        this.readAndUploadFile(file);\r\n    }\r\n\r\n    insertBase64Image(url) {\r\n        const range = this.range;\r\n                \r\n        this.placeholderDelta = this.quill.insertEmbed(\r\n            range.index,\r\n            LoadingImage.blotName,\r\n            `${url}`,\r\n            \"user\"\r\n        );\r\n    }\r\n\r\n    insertToEditor(url) {\r\n        const range = this.range;        \r\n\r\n        const lengthToDelete = this.calculatePlaceholderInsertLength();        \r\n        \r\n        // Delete the placeholder image\r\n        this.quill.deleteText(range.index, lengthToDelete, \"user\");\r\n        // Insert the server saved image\r\n        this.quill.insertEmbed(range.index, \"image\", `${url}`, \"user\");\r\n\r\n        range.index++;\r\n        this.quill.setSelection(range, \"user\");\r\n    }\r\n\r\n    // The length of the insert delta from insertBase64Image can vary depending on what part of the line the insert occurs\r\n    calculatePlaceholderInsertLength() {\r\n        return this.placeholderDelta.ops.reduce((accumulator, deltaOperation) => {            \r\n            if (deltaOperation.hasOwnProperty('insert'))\r\n                accumulator++;\r\n\r\n            return accumulator;\r\n        }, 0);\r\n    }\r\n\r\n    removeBase64Image() {        \r\n        const range = this.range;\r\n        const lengthToDelete = this.calculatePlaceholderInsertLength();\r\n\r\n        this.quill.deleteText(range.index, lengthToDelete, \"user\");\r\n    }\r\n}\r\n\r\nwindow.ImageUploader = ImageUploader;\r\nexport default ImageUploader;","import { render } from \"./ArticleForm.vue?vue&type=template&id=017fd9b2&scoped=true\"\nimport script from \"./ArticleForm.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleForm.vue?vue&type=script&lang=js\"\n\nimport \"../assets/libs/bootstrap.min.css?vue&type=style&index=0&id=017fd9b2&scoped=true&lang=css\"\nimport \"./ArticleForm.vue?vue&type=style&index=1&id=017fd9b2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Grigoriy\\\\Desktop\\\\avtomaslo\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-017fd9b2\"]])\n\nexport default __exports__"],"names":["useAdminProduct","article","ref","imageUrl","title","content","slug","useBlogStore","defineStore","articles","fetchArticles","axios","config","response","value","data","fetchArticle","id","fetchArticleBySlug","createArticle","token","localStorage","getItem","headers","Authorization","JSON","stringify","console","log","alert","deleteArticle","filteredArticles","filter","_id","updateArticle","getImageUrl","require","class","_createElementVNode","style","type","_createElementBlock","onSubmit","$props","_hoisted_1","_hoisted_2","required","_hoisted_3","_hoisted_4","placeholder","_hoisted_5","_createVNode","_component_QuillEditor","contentType","toolbar","modules","$setup","_hoisted_6","_component_ImageUploaderArticle","imageUrlProp","onUpdateImage","imageMaxWidth","wrapSize","_hoisted_7","src","API_URL","alt","onChange","props","emits","setup","context","fileInput","handleFileInputChange","files","uploadFile","formData","FormData","append","filename","emit","extraInfo","onMounted","onUpdated","__exports__","_superPropBase","object","property","Object","prototype","hasOwnProperty","call","getPrototypeOf","_get","Reflect","get","bind","target","receiver","base","superPropBase","desc","getOwnPropertyDescriptor","arguments","length","apply","this","InlineBlot","Quill","LoadingImage","index","cache","node","image","document","createElement","setAttribute","appendChild","domNode","dataset","custom","blotName","className","tagName","ImageUploader","quill","options","range","placeholderDelta","upload","warn","getModule","addHandler","selectLocalImage","handleDrop","handlePaste","root","addEventListener","focus","getSelection","fileHolder","onchange","fileChanged","body","click","window","requestAnimationFrame","removeChild","evt","dataTransfer","stopPropagation","preventDefault","caretRangeFromPoint","selection","clientX","clientY","setBaseAndExtent","startContainer","startOffset","caretPositionFromPoint","offsetNode","offset","file","setTimeout","readAndUploadFile","clipboard","clipboardData","items","IMAGE_MIME_REGEX","test","i","getAsFile","isUploadReject","fileReader","FileReader","base64ImageSrc","result","insertBase64Image","readAsDataURL","then","insertToEditor","error","removeBase64Image","url","insertEmbed","lengthToDelete","calculatePlaceholderInsertLength","deleteText","setSelection","ops","reduce","accumulator","deltaOperation","components","ImageUploaderArticle","QuillEditor","name","module","Promise","resolve","reject","res","catch","err","render"],"sourceRoot":""}